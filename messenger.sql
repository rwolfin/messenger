-- phpMyAdmin SQL Dump
-- version 5.2.2
-- https://www.phpmyadmin.net/
--
-- Хост: MySQL-8.0
-- Время создания: Сен 19 2025 г., 00:10
-- Версия сервера: 8.0.41
-- Версия PHP: 8.4.1

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- База данных: `messenger`
--

-- --------------------------------------------------------

--
-- Структура таблицы `chat_application_users`
--

CREATE TABLE `chat_application_users` (
  `user_id` int NOT NULL,
  `user_name` varchar(250) NOT NULL,
  `user_email` varchar(250) NOT NULL,
  `user_password` varchar(100) NOT NULL,
  `memberof` varchar(250) DEFAULT NULL,
  `showemail` int DEFAULT NULL,
  `user_profile` varchar(100) NOT NULL,
  `user_status` enum('Disabled','Enable') NOT NULL,
  `user_created_on` datetime NOT NULL,
  `user_verification_code` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT 'Registration Verification Code sent to the user''s email',
  `user_login_status` enum('Logout','Login') NOT NULL,
  `user_token` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT 'A random unique string we generate with every login to be used in conjunction with `user_connection_id` to implement One-to-One Private Chat',
  `user_connection_id` int DEFAULT NULL COMMENT 'Unique Connection ID generated by the WebSocket Connection for every connected client (used in conjuntion with `user_token` column to implement One-to-One Private Chat)'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Дамп данных таблицы `chat_application_users`
--

INSERT INTO `chat_application_users` (`user_id`, `user_name`, `user_email`, `user_password`, `memberof`, `showemail`, `user_profile`, `user_status`, `user_created_on`, `user_verification_code`, `user_login_status`, `user_token`, `user_connection_id`) VALUES
(11, 'Роман Волков', 'web-vl@mail.ru', '123456', '6,7', 0, 'images/1925196428.jpg', 'Enable', '2023-09-25 21:45:58', '2576115082b182fd3228040013a12bf7', 'Login', 'cea5ca6062676cf5a8d18da98da4b2db', 105),
(12, 'Самир', 'samir@test.com', '123456', '3,4,0', 0, 'images/1695766436.png', 'Enable', '2023-09-26 22:13:56', '627f28af6a96f5f128cb4a039abf7f6f', 'Logout', 'dd1f4a5899f91976339e522a8bd48417', 1176),
(13, 'Ясмин Ниази', 'niazy@test.com', '123456', NULL, 0, 'images/1695766941.png', 'Enable', '2023-09-26 22:22:21', '59fcb028adfd03b3c404ec46d858258a', 'Logout', '669434cd6272622d16a26cd6c7ce3e8e', NULL),
(14, 'Леонард', 'baher@test.com', '123456', NULL, NULL, 'images/1695770137.png', 'Disabled', '2023-09-26 23:15:37', 'ebde936036ec38c6edc2f04660525d8a', 'Logout', NULL, NULL),
(15, 'Алина', 'info@web-vl.ru', '123456', '1,2,3,4,5', 0, 'images/1136324244.jpg', 'Enable', '2023-09-26 23:59:03', 'e2b598d14a3abce067afe26808cbb4b7', 'Logout', '01dd14142ad87ae4487feeefbed90d08', 837);

-- --------------------------------------------------------

--
-- Структура таблицы `group_chats`
--

CREATE TABLE `group_chats` (
  `id` int NOT NULL,
  `chatname` varchar(200) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Дамп данных таблицы `group_chats`
--

INSERT INTO `group_chats` (`id`, `chatname`) VALUES
(3, 'Первый чат'),
(4, 'Чат Skillfactory'),
(5, 'Второй чат'),
(6, 'Тестовый чат'),
(7, 'Чат Skillfactory');

-- --------------------------------------------------------

--
-- Структура таблицы `group_chat_messages`
--

CREATE TABLE `group_chat_messages` (
  `id` int NOT NULL,
  `userid` int NOT NULL,
  `group_chat_message` varchar(200) NOT NULL,
  `groupid` int NOT NULL,
  `created_on` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

--
-- Дамп данных таблицы `group_chat_messages`
--

INSERT INTO `group_chat_messages` (`id`, `userid`, `group_chat_message`, `groupid`, `created_on`) VALUES
(135, 15, 'ghbas\n', 1, '2025-09-15 08:01:19'),
(140, 15, 'xas', 3, '2025-09-16 05:40:18'),
(141, 15, 'zsc', 3, '2025-09-16 05:40:20'),
(142, 15, 'zcs', 3, '2025-09-16 05:40:23'),
(144, 15, 'фцыфц', 2, '2025-09-17 06:27:51'),
(146, 11, 'выффы', 6, '2025-09-18 09:02:29');

-- --------------------------------------------------------

--
-- Структура таблицы `private_chat_messages`
--

CREATE TABLE `private_chat_messages` (
  `chat_message_id` int NOT NULL,
  `to_user_id` int NOT NULL,
  `from_user_id` int NOT NULL,
  `private_chat_message` mediumtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `status` enum('Yes','No') CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL COMMENT 'Chat Message is either ''Read'' or ''Unread'''
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin;

--
-- Дамп данных таблицы `private_chat_messages`
--

INSERT INTO `private_chat_messages` (`chat_message_id`, `to_user_id`, `from_user_id`, `private_chat_message`, `timestamp`, `status`) VALUES
(1, 15, 11, 'HelloFatma', '2023-10-03 05:14:38', 'Yes'),
(2, 15, 11, 'test test', '2023-10-03 05:24:30', 'Yes'),
(3, 15, 11, 'How are you', '2023-10-03 05:24:48', 'Yes'),
(4, 15, 11, 'How are you Fatma?\n', '2023-10-03 05:26:39', 'Yes'),
(5, 15, 11, 'd', '2023-10-03 06:23:25', 'Yes'),
(6, 11, 15, 'qqq', '2023-10-03 06:23:33', 'Yes'),
(7, 11, 15, 'q', '2023-10-03 06:23:37', 'Yes'),
(8, 11, 15, 'q', '2023-10-03 06:23:47', 'Yes'),
(9, 11, 15, 'q', '2023-10-03 06:23:58', 'Yes'),
(10, 15, 11, 'q', '2023-10-03 06:37:44', 'Yes'),
(11, 15, 11, 'q', '2023-10-03 06:37:50', 'Yes'),
(12, 11, 15, 'q', '2023-10-03 06:38:01', 'Yes'),
(13, 15, 11, 'test', '2023-10-03 06:38:33', 'Yes'),
(14, 11, 15, 'g', '2023-10-03 06:38:49', 'Yes'),
(15, 11, 15, 'tttt', '2023-10-03 06:39:19', 'Yes'),
(16, 11, 15, 'test', '2023-10-03 06:48:20', 'Yes'),
(17, 15, 11, 'q', '2023-10-03 07:18:22', 'Yes'),
(20, 15, 11, 'q', '2023-10-03 07:48:03', 'Yes'),
(21, 11, 15, 'q', '2023-10-03 07:48:29', 'Yes'),
(22, 15, 11, 'h', '2023-10-04 08:29:15', 'Yes'),
(23, 11, 15, 'h', '2023-10-04 08:29:34', 'Yes'),
(24, 11, 15, 'Hello Ahmed', '2023-10-04 08:30:47', 'Yes'),
(25, 11, 15, 'Where Have you been?\n', '2023-10-04 08:31:00', 'Yes'),
(26, 11, 15, 'Where are you???', '2023-10-04 08:31:46', 'Yes'),
(27, 11, 15, 'Hmmm', '2023-10-04 08:32:19', 'Yes'),
(28, 11, 15, 'qqq', '2023-10-04 08:32:29', 'Yes'),
(29, 15, 11, 'Im here\n', '2023-10-04 08:32:47', 'Yes'),
(30, 15, 11, 'how are you?', '2023-10-04 08:33:04', 'Yes'),
(31, 15, 11, 'test', '2023-10-04 08:33:09', 'Yes'),
(32, 11, 15, 'hey', '2023-10-04 08:35:10', 'Yes'),
(33, 11, 15, 'Hello Ahmed', '2023-10-04 22:47:04', 'Yes'),
(34, 11, 15, 'g', '2023-10-04 23:21:55', 'Yes'),
(35, 11, 15, 'ggggg', '2023-10-04 23:22:14', 'Yes'),
(36, 11, 15, 'tesst', '2023-10-04 23:22:24', 'Yes'),
(37, 15, 11, 'q', '2023-10-04 23:23:39', 'Yes'),
(38, 11, 15, 'q', '2023-10-04 23:23:44', 'Yes'),
(39, 11, 15, 'q', '2023-10-04 23:23:51', 'Yes'),
(40, 11, 15, 'qqqqq', '2023-10-04 23:24:00', 'Yes'),
(41, 15, 11, 'q', '2023-10-04 23:24:03', 'Yes'),
(42, 11, 15, 'qqq', '2023-10-04 23:24:07', 'Yes'),
(43, 11, 15, 'qqq', '2023-10-04 23:40:36', 'Yes'),
(44, 11, 15, 'f', '2023-10-05 00:11:43', 'Yes'),
(46, 11, 15, 'q', '2023-10-05 00:11:56', 'Yes'),
(47, 11, 15, 'q', '2023-10-05 00:30:55', 'Yes'),
(48, 11, 15, 'test', '2023-10-05 00:31:04', 'Yes'),
(49, 11, 15, 'q', '2023-10-05 00:32:57', 'Yes'),
(50, 11, 15, 'q', '2023-10-05 00:33:04', 'Yes'),
(51, 11, 15, 'q', '2023-10-05 00:33:10', 'Yes'),
(52, 11, 15, 'q', '2023-10-05 00:34:14', 'Yes'),
(53, 11, 15, 'q', '2023-10-05 00:34:18', 'Yes'),
(54, 11, 15, 'q', '2023-10-05 00:34:23', 'Yes'),
(55, 11, 15, 'q', '2023-10-05 00:37:20', 'Yes'),
(56, 11, 15, 'q', '2023-10-05 00:37:34', 'Yes'),
(57, 11, 15, 'q', '2023-10-05 00:37:45', 'Yes'),
(59, 11, 15, 'ad', '2025-09-15 05:28:34', 'Yes'),
(60, 11, 15, '23', '2025-09-16 02:28:43', 'Yes'),
(61, 11, 15, 'zcs', '2025-09-16 02:40:30', 'Yes'),
(62, 11, 15, 'c', '2025-09-16 02:40:32', 'Yes'),
(63, 15, 11, 'фыв', '2025-09-18 06:02:25', 'No');

--
-- Индексы сохранённых таблиц
--

--
-- Индексы таблицы `chat_application_users`
--
ALTER TABLE `chat_application_users`
  ADD PRIMARY KEY (`user_id`);

--
-- Индексы таблицы `group_chats`
--
ALTER TABLE `group_chats`
  ADD PRIMARY KEY (`id`);

--
-- Индексы таблицы `group_chat_messages`
--
ALTER TABLE `group_chat_messages`
  ADD PRIMARY KEY (`id`);

--
-- Индексы таблицы `private_chat_messages`
--
ALTER TABLE `private_chat_messages`
  ADD PRIMARY KEY (`chat_message_id`);

--
-- AUTO_INCREMENT для сохранённых таблиц
--

--
-- AUTO_INCREMENT для таблицы `chat_application_users`
--
ALTER TABLE `chat_application_users`
  MODIFY `user_id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=17;

--
-- AUTO_INCREMENT для таблицы `group_chats`
--
ALTER TABLE `group_chats`
  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=8;

--
-- AUTO_INCREMENT для таблицы `group_chat_messages`
--
ALTER TABLE `group_chat_messages`
  MODIFY `id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=147;

--
-- AUTO_INCREMENT для таблицы `private_chat_messages`
--
ALTER TABLE `private_chat_messages`
  MODIFY `chat_message_id` int NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=64;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
